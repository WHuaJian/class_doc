> 变量名称可以由字母，数字，下划线组成，但不能以数字开头
>
> 变量的默认类型是字符串，如需要其他类型需要进行显示指定
>
> 变量由等号连接，等号之间不能有空格。
>
> 变量的值有空格，需要用单引号/双引号包裹
>
> 变量值可以使用转移字符串`"\"`
>
> 操作变量使用$变量名或${变量名}
>
> 如果将命令结果赋予变量需要使用反引号或$()包含命令。例如:`name=$(date)`。date为系统命令



### 变量分类

- 用户自定义变量
- 环境变量：保存操作系统环境相关的数据
- 位置参数变量：用于向脚本中传递参数或数据。变量的名称作用都是固定的
- 预定义变量：Bash中已经定义好的变量



# 用户变量

> 只在当前shell有效

#### 变量定义

```
name="weng hua cheng"
aa=123
aa="$aa"456    #123456
aa="$aa"567    #变量叠加，123456567
```

#### 变量调用

```
echo $name
```

#### 变量查看

```
set
```

#### 变量删除

```
unset name
```



# 环境变量

> 当前shell和这个shell的子shell生效
>
> 如果写入配置文件可以在所有的shell生效

#### 申明变量

```
export 变量名=变量值
```

#### 变量查询

```
env
```

#### 变量删除

```
unset name
```

通用系统变量修改

![image-20201005103320299](.\images\image-20201005103320299.png)

> 该环境变量为PS1，作用是修改用户shell显示，比如用户显示的路径为最后一个文件夹，可以改为完整文件夹



# 位置参数变量

![image-20201005103959222](.\images\image-20201005103959222.png)

> 脚本中编写 `echo $0 echo $1 echo $2 echo $2`时如果直接执行脚本只有$0有数据即你编写都命令
>
> 如果使用 `sh 脚本 11 22 33` 则$1-$3输出的值为11，22，33
>
> $n的目的就是输出传入的参数

示例

![image-20201005105150235](.\images\image-20201005105150235.png)



# 预定义变量

![image-20201005105722042](.\images\image-20201005105722042.png)

> 最常用的命令是$?。例如当你执行了`ls`命令后执行$?命令则会返回0代表ls命令正确执行。当执行一串乱七八糟的命令则会返回一个特定数字代表命令执行失败

示例

![image-20201005110446693](.\images\image-20201005110446693.png)



## 接受键盘输入

命令格式：read [选项] [变量名]

选项

- -p “提示信息”：输出提示信息
- -t 秒数：指定read命令等待用户输入的时间
- -n 字符数：只要接受指定的字符数就会执行
- -s：隐藏输入的数据，适用于机密信息输入

示例

![image-20201005111222677](.\images\image-20201005111222677.png)



## 数值运算

```
aa=11
bb=22
cc=$aa+$bb   #11+22,因为默认字符串
```

### declare

功能：声明变量类型

格式：`declare [+/-][选项][变量名]` 

选项

- -：给变量设定类型属性，**特别注意和我们常识相反**
- +：取消变量类型属性，**特别注意和我们常识相反**
- `-i`：将变量声明为整数型
- -x：将变量声明为环境变量
- -p：显示指定变量都被声明类型

示例

```
declare -p aa  #查看变量类型，输出declare -x aa="11"代表其为环境变量
declare -i cc=$aa+$bb    #用数量类型进行运算

```



### expr或let数值运算工具

```
dd=$(expr $aa + $bb)   #+号两边必须有空格
```

> 该方法不常用



### $((运算符))或$[运算符]

```
ff=$(($aa+$bb))
ff=$[$aa+$bb]
```

> 也是数组操作，比较常用



#### 运算符

![image-20201005113013002](.\images\image-20201005113013002.png)

> 数值越大优先级越高



## 变量替换

![image-20201005113500013](.\images\image-20201005113500013.png)

> 当使用时过来查即可，不需要背



# 环境变量配置文件

### `source`

功能：修改环境变量后使其生效，否则需要重启

命令格式：source 配置文件

#### 常用配置文件位置

- `/etc/profile`
- `/etc/profile.d/*.sh`

> 该目录下所有的`.sh`都是配文件

- `~/.bash_profile`

> ~/代表用户home目录

- `~/.bashrc`
- `/etc/bashrc`



### 环境变量读取优先级

![image-20201005132603897](.\images\image-20201005132603897.png)



