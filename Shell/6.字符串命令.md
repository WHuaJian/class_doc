功能：截取列数据

命令格式：cut -f 列号 文件名

示例

```
cut -f 2,4 student.txt   #截取第二第四列整列的所有数据
```

> 文件内列于列的间隔是tab符号而不是空格
>
> 该功能用于截取类似csv这样格式的整列的数据

指定分隔符

```
cut -d ":" -f 1,3 student.txt
```

> 指定分隔符为冒号并进行列分割



功能：格式化输出

命令格式：`printf '输出类型输出格式' 输出内容`

输出类型

- `%ns`：输出字符串。n是数字指输出几个字符
- `%ni`：输出整数。n是数字指输出几个数字
- `%m.nf`：输出浮点数。m和n是数字，分别指整数位和小数位

输出格式

- \a：输出警告信息
- \b：输出退格键
- \f：清除屏幕
- \n：换行
- \r：回车
- \t：水平输出退格键Tab
- \v：垂直输出退格键Tab

示例

```
printf '%s %s %s' 1 2 3 4 5 6   #1 2 34 5 6
printf '%s %s %s\n' 1 2 3 4 5 6   #1 2 3[换行]4 5 6
```

> 会根据内容反复截取，上面的例子是以三个数字为一组进行格式化输出的



## `awk`编程

命令格式：`awk` '条件1｛动作1｝条件2｛动作2｝....' 文件名

#### 条件

> 关系表达式
>
> 如：x>10,x<10

动作

- 格式化输出
- 流程控制语句

#### 列分割实例（cut的功能）

```
awk '{printf $2 "\t" $6"\n"}' student.txt
```

> 输出第二列和第六列的数据

#### 其他用法

```
df -h | grep sda5 | awk '{print $5}' | cut -d "%" -f 1
```

> 输出硬盘的使用率，当达到某个值时可以报警

#### begin

> 当后面的条件满足才会继续运行或再脚本开始前处理

```
awk 'BEGIN {printf "hello"}' {printf "world"} student.txt
```

#### 指定分隔符

格式：｛FS=":"｝

```
awk 'BEGIN {FS=":"}{printf $1 "\t" $3 "\n"}' student.txt
```

> 必须要加begin，否则第一行不会被正确处理

#### end

```
awk 'BEGIN {FS=":"}END{print "end"}{printf $1 "\t" $3 "\n"}' student.txt
```

> 结束时触发操作



### 关系运算符

```
awk '$6>=87' {printf $2 "\n"}'
```

> 当第六列的数据大于等于87，则打印所在行的第二列数据



### `sed`命令

> 对文件进行选取，替换，新增等等操作
>
> 类似vi的功能，但`sed`可以通过管道修改结果，而vi需要把结果保存到文件才能操作

命令格式: `sed [选项] '[动作]' 文件名`

选项

- -n：只会显示经过`sed`命令处理的行,隐藏其他未处理的行
- -e：允许对输入数据应用多条`sed`命令编辑
- -`i`：用`sed`的修改结果直接修改读取数据的文件，而不是由屏幕输出。也就是你都源数据会被修改

动作

![image-20201006102922683](.\images\image-20201006102922683.png)

行数据库操作示例

```
sed -n ‘2p’ student.txt  #查看文件第二行，不加-n会显示所有内容
sed ‘2,4d’ student.txt   #删除第二到第四行数据，但不修改文件本身
sed '2a hello' student.txt  #在第二行后追加hello
sed '2i hello \ world' student.txt #在第二行前插入两行数据。\代表换行
sed ‘2c hello’ student.txt #数据替换
```

#### 字符串替换

格式：`sed 's/旧字符串/新字符串/g' 文件名`

```
sed '3s/74/99/g' student.txt   #把第三行中的74替换为99
```



#### 排序命令

格式：sort [选项] 文件名

选项

- -f：忽略大小写
- -n：以数值形式排序，默认字符串
- -r：反向排序
- -t：指定分隔符，默认制表符
- -k n[,m]：指定字段范围排序，从n字段开始到m字段结束默认结尾



#### 统计

格式：`wc [选项] 文件名`

选项

- -l：只统计行数
- -w：只统计单词
- -m：只统计字符数