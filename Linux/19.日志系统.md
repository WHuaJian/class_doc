## `rsyslogd`服务特点

- 基于TCP网络协议传输日志信息
- 更安全的网络传输方式
- 有日志消息的及时分析框架
- 后台数据库
- 配置文件中可以写简单的逻辑判断
- 与syslog配置文件兼容



### 常见日志作用和位置

- 记录了系统定时任务相关的日志

> `/var/log/cron`

- 记录了打印信息的日志

> `/var/log/cups/`

- 记录了系统开机自检的信息

> `/var/log/dmesg`

- 记录错误登陆日志。二进制文件，需要`lastb`命令查看

> `/var/log/btmp`

- 记录系统中所有用户最后一次的登录时间的日志。二进制文件，需要`lastlog`命令查看

> `/var/log/lastlog`

- 记录邮件信息

> `/var/log/mailog`

- 记录系统重要信息的日志

> `/var/log/message`
>
> 系统出问题最应该先看这个文件

- 记录系统安全信息的日志

> `/var/log/sercue`

- 永久记录所有的登录，注销，启动重启关机事件，需要通过`last`命令查看

> `/var/log/wtmp`

- 记录当前已经登陆的用户的信息

> `/var/run/utmp`



### 日志文件格式

- 事件产生时间
- 发送事件的服务器的主机名
- 产生事件的服务名或程序名
- 事件的具体信息



### `rsyslogd`配置文件

> 位置：`/etc/rsyslog.conf` 
>
> 里面记录了不同类别的日志存储位置
>
> 格式：服务名称 连接符号 位置

![image-20201001140111572](.\images\image-20201001140111572.png)![image-20201001140158912](.\images\image-20201001140158912.png)



![image-20201001140318152](.\images\image-20201001140318152.png)![image-20201001140455137](.\images\image-20201001140455137.png)



## 日志轮替

> 即日志每个一段时间生成一个新的，并删除超过一定时间的日志
>
> 配置位置：`/etc/logrotate.conf`

![image-20201001141745542](.\images\image-20201001141745542.png)![image-20201001141833535](.\images\image-20201001141833535.png)







